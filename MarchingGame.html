<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marching Band Game</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            background: black; /* Set a background color for visibility */
            color: white; /* Text color */
            position: relative; /* For absolute positioning of boxes */
            overflow: hidden; /* Prevent scrollbars from appearing */
        }
        #card-pack {
            background-image: url('CardPack.png');
            background-size: cover;
            width: 200px; /* Adjust size as needed */
            height: 200px; /* Adjust size as needed */
            margin: 50px auto; /* Center the image */
            cursor: pointer; /* Show pointer cursor */
            display: none; /* Hide initially */
        }
        .small-box {
            position: absolute;
            background-color: white; /* Box color */
            pointer-events: none; /* Prevent interaction with boxes */
            opacity: 1;
            transition: transform 1.5s ease, opacity 1.5s ease; /* Smooth transition */
        }
        #reset-progress {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: red; /* Red button for reset */
            color: white;
            text-align: center;
            cursor: pointer; /* Show pointer cursor */
        }
        #result {
            text-align: center;
            margin-top: 20px;
            font-size: 1.5em;
            color: yellow; /* Color for visibility */
        }
    </style>
</head>
<body>
    <div id="card-pack"></div>
    <div id="reset-progress">Reset Progress</div>
    <div id="result"></div> <!-- Container for results -->

    <script>
        // Progress storage
        const progressKey = 'marchingGameProgress';
        const defaultProgress = { firstTime: true, cards: [] };

        // Load progress from local storage
        let progress = JSON.parse(localStorage.getItem(progressKey)) || defaultProgress;

        // Show card pack if it's the user's first time
        if (progress.firstTime) {
            document.getElementById('card-pack').style.display = 'block';
        }

        // Function to create explosion effect
        function createExplosion(event) {
            // Get click position
            const clickX = event.clientX;
            const clickY = event.clientY;

            for (let i = 0; i < 20; i++) {
                const box = document.createElement('div');
                box.className = 'small-box';

                // Randomize size and position
                const size = Math.random() * 20 + 10; // Size between 10px and 30px
                box.style.width = `${size}px`;
                box.style.height = `${size}px`;

                // Set random angle and distance for explosion effect
                const angle = Math.random() * 2 * Math.PI; // Random angle in radians
                const distance = Math.random() * 100 + 50; // Random distance from click
                const randomX = Math.cos(angle) * distance;
                const randomY = Math.sin(angle) * distance;

                // Set initial position at click location
                box.style.left = `${clickX}px`;
                box.style.top = `${clickY}px`;

                // Add to body
                document.body.appendChild(box);

                // Trigger explosion animation
                setTimeout(() => {
                    box.style.transform = `translate(${randomX}px, ${randomY}px) translateY(100px)`; // Move and fall
                    box.style.opacity = '0'; // Fade out
                }, 50); // Small delay before animation starts

                // Remove box after animation
                setTimeout(() => {
                    box.remove();
                }, 1500); // Remove after 1.5 seconds
            }

            // Existing card pack click functionality
            if (progress.firstTime) {
                progress.firstTime = false;
                localStorage.setItem(progressKey, JSON.stringify(progress));
                const receivedCards = getRandomCards(); // Get random cards
                document.getElementById('result').innerText = "You have received: " + receivedCards.join(", ");
                document.getElementById('card-pack').style.display = 'none'; // Hide the card pack after first click
            }
        }

        // Function to get 3 random cards
        function getRandomCards() {
            const cards = ["Katie", "Dakota", "Bailee", "Sami", "Samantha", "Barker", "Grace", "Kambry", "Ellie", "Addison", "Jacob Condon", "Jacobn"];
            const randomCards = [];
            while (randomCards.length < 3) {
                const card = cards[Math.floor(Math.random() * cards.length)];
                if (!randomCards.includes(card)) {
                    randomCards.push(card);
                }
            }
            return randomCards;
        }

        // Event listeners
        document.getElementById('card-pack').addEventListener('click', createExplosion);
        document.getElementById('reset-progress').addEventListener('click', () => {
            localStorage.removeItem(progressKey);
            document.getElementById('result').innerText = 'Progress has been reset!'; // Show reset message
            document.getElementById('card-pack').style.display = 'block'; // Show card pack again after reset
        });
    </script>
</body>
</html>
