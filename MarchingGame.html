<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marching Band Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            margin: 0;
            background-color: #d3d3d3; /* Light gray background */
            position: relative; /* For absolute positioning of buttons */
        }

        #cardPack {
            width: 200px; /* Adjust size as needed */
            cursor: pointer;
            position: relative; /* Set relative positioning for the animation */
        }

        .reset-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
            background-color: red;
            color: white;
            border: none;
            cursor: pointer;
        }

        .deck-button {
            position: absolute;
            bottom: 10px;
            right: 10px;
            padding: 10px 20px;
            background-color: blue;
            color: white;
            border: none;
            cursor: pointer;
        }

        .card-list {
            margin-top: 20px;
            text-align: center;
            word-wrap: break-word; /* Ensures long text wraps */
            max-width: 80%; /* Prevents overflow on small screens */
        }

        #baileeCardImage {
            display: none;
            margin-top: 20px;
            width: 200px; /* Adjust size as needed */
            cursor: pointer;
        }

    </style>
</head>
<body>

    <button class="reset-button" onclick="resetProgress()">Reset Progress</button>
    <button class="deck-button" onclick="goToDeck()">My Deck</button>
    <img id="cardPack" src="CardPack.png" alt="Card Pack" onclick="openCardPack()">
    <div id="cardsReceived" class="card-list"></div>
    <img id="baileeCardImage" src="BaileeCard.png" alt="Bailee's Card" onclick="revealOtherCards()">

    <script>
        const cards = [
            "Keygan Angus", "Gregory Arends", "Jackson Baker", "Hunter Barfels",
            "Drew Barker", "Ella Barker", "Caleb Biensen", "Hayden Black",
            "Olivia Brown-Gonnerman", "Rizzy Carsrud", "Jacob Condon",
            "Izzy Coolley", "Alexander Dodd", "Claudia Edmonds", "Reece Elliott",
            "Natalie Emery", "Miles Engstrom", "Morgan Erickson", "Silvana Espa",
            "Alyosha Evans", "Cael Ferguson", "Nicholas Fischels", "Ella Ganzer",
            "Eduardo Garcia", "Samantha Garcia", "Jaden Grimm", "Allison Gruhn",
            "Winter Gruver", "Elle Hadaway", "Cameron Haddock", "Luke Hambly",
            "Natalee Harnage", "Samuel Harrington", "Grace Heginger", "Grace Hensley",
            "Dakota Higdon", "Wrigley Isleb", "Delaney Jones", "Kambry Katzer",
            "Bailee Knott", "Gabriel Kramer", "Brennyn Laffoon", "Emma Lamberson",
            "Addison Lawler", "Jameson Lawler", "Dawson Lemke", "Henry Little",
            "Simon Mills", "Freedom Modrow", "Chloe Moffitt", "Alexis Muschick",
            "Nicholas Muschick", "Ethan Neus", "Andrew Ohm", "Linkoln Ose",
            "Trevor Ott", "Samantha Perez", "Samantha Phillips", "Eayon Phipps",
            "Katherine Poock", "Levi Poock", "Lillian Sadler", "Naomi Schuster",
            "Emilia Stage", "Peter Thomas", "Brady Tscherter", "Miles Unruh",
            "Dexter Walker", "Amelia Wendeln", "Ryan Wessels", "Henry Widner",
            "Thatcher Woodhouse"
        ];

        let hasOpenedPack = false;
        let receivedCards = JSON.parse(localStorage.getItem('receivedCards')) || [];
        let otherCards = [];

        // Check if cards are already received
        if (receivedCards.length > 0) {
            document.getElementById('cardPack').style.display = 'none'; // Hide card pack if cards are received
        }

        function openCardPack() {
            if (!hasOpenedPack) {
                hasOpenedPack = true;

                let cardPool = [...cards];
                receivedCards = [];

                for (let i = 0; i < 3; i++) {
                    const randomIndex = Math.floor(Math.random() * cardPool.length);
                    const card = cardPool[randomIndex];
                    cardPool.splice(randomIndex, 1); // Remove selected card from the pool
                    receivedCards.push(card);
                }

                // Check if Bailee is in the received cards
                if (receivedCards.includes("Bailee Knott")) {
                    document.getElementById('baileeCardImage').style.display = 'block'; // Show Bailee card image
                    otherCards = receivedCards.filter(card => card !== "Bailee Knott"); // Get the other two cards
                    document.getElementById('cardsReceived').innerText = ""; // Hide other cards until Bailee is clicked
                } else {
                    // Show all received cards at once if Bailee is not received
                    document.getElementById('cardsReceived').innerText = "You have received: " + receivedCards.join(", ");
                }

                // Hide the card pack after the selection
                document.getElementById('cardPack').style.display = 'none';

                // Save received cards to local storage
                localStorage.setItem('receivedCards', JSON.stringify(receivedCards));
            }
        }

        function revealOtherCards() {
            // Show the other two cards after Bailee is clicked
            document.getElementById('cardsReceived').innerText = "You have received: " + otherCards.join(", ");
            document.getElementById('baileeCardImage').style.display = 'none'; // Hide Bailee card image after clicking
        }

        function resetProgress() {
            hasOpenedPack = false;
            document.getElementById('cardsReceived').innerText = '';
            document.getElementById('baileeCardImage').style.display = 'none'; // Hide Bailee card
            receivedCards = []; // Clear received cards
            localStorage.removeItem('receivedCards'); // Remove from local storage
            document.getElementById('cardPack').style.display = 'block'; // Show card pack again
        }

        function goToDeck() {
            localStorage.setItem('receivedCards', JSON.stringify(receivedCards));
            window.location.href = 'marchingchar_deck.html';
        }
    </script>
</body>
</html>
