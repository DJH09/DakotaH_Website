<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marching Band Game</title>
    <style>
        body {
            background-color: #d3d3d3; /* Light gray background */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        #cardPack {
            width: 200px;
            cursor: pointer;
            display: block;
        }

        .bailee-card, .katie-card {
            width: 200px;
            display: none;
            cursor: pointer;
        }

        .reset-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
            background-color: red;
            color: white;
            border: none;
            cursor: pointer;
        }

        .my-deck-button {
            position: absolute;
            bottom: 10px;
            right: 10px;
            padding: 10px 20px;
            background-color: blue;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <button class="reset-button" onclick="resetProgress()">Reset Progress</button>
    <button class="my-deck-button" onclick="goToDeck()">My Deck</button>

    <img id="cardPack" src="cardpack.png" alt="Card Pack" onclick="openCardPack()">

    <img id="baileeCard" class="bailee-card" src="BaileeCard.png" alt="Bailee's Card" onclick="revealNextCard('bailee')">
    <img id="katieCard" class="katie-card" src="KatieCard.png" alt="Katie's Card" onclick="revealNextCard('katie')">
    
    <div id="textDisplay"></div>

    <script>
        const cards = [
            "Keygan Angus", "Gregory Arends", "Jackson Baker", "Hunter Barfels",
            "Drew Barker", "Ella Barker", "Caleb Biensen", "Hayden Black",
            "Olivia Brown-Gonnerman", "Rizzy Carsrud", "Jacob Condon",
            "Izzy Coolley", "Alexander Dodd", "Claudia Edmonds", "Reece Elliott",
            "Natalie Emery", "Miles Engstrom", "Morgan Erickson", "Silvana Espa",
            "Alyosha Evans", "Cael Ferguson", "Nicholas Fischels", "Ella Ganzer",
            "Eduardo Garcia", "Samantha Garcia", "Jaden Grimm", "Allison Gruhn",
            "Winter Gruver", "Elle Hadaway", "Cameron Haddock", "Luke Hambly",
            "Natalee Harnage", "Samuel Harrington", "Grace Heginger", "Grace Hensley",
            "Dakota Higdon", "Wrigley Isleb", "Delaney Jones", "Kambry Katzer",
            "Bailee Knott", "Gabriel Kramer", "Brennyn Laffoon", "Emma Lamberson",
            "Addison Lawler", "Jameson Lawler", "Dawson Lemke", "Henry Little",
            "Simon Mills", "Freedom Modrow", "Chloe Moffitt", "Alexis Muschick",
            "Nicholas Muschick", "Ethan Neus", "Andrew Ohm", "Linkoln Ose",
            "Trevor Ott", "Samantha Perez", "Samantha Phillips", "Eayon Phipps",
            "Katherine Poock", "Levi Poock", "Lillian Sadler", "Naomi Schuster",
            "Emilia Stage", "Peter Thomas", "Brady Tscherter", "Miles Unruh",
            "Dexter Walker", "Amelia Wendeln", "Ryan Wessels", "Henry Widner",
            "Thatcher Woodhouse"
        ];

        let cardsRevealed = 0;
        const receivedCards = [];
        let displayQueue = [];

        function openCardPack() {
            document.getElementById('cardPack').style.display = 'none'; // Hide card pack once clicked

            // Randomly generate 3 cards
            while (receivedCards.length < 3) {
                let randomCard = cards[Math.floor(Math.random() * cards.length)];
                if (!receivedCards.includes(randomCard)) {
                    receivedCards.push(randomCard);
                }
            }

            localStorage.setItem('receivedCards', JSON.stringify(receivedCards));
            displayQueue = [...receivedCards]; // Copy of received cards

            if (displayQueue.includes("Bailee Knott")) {
                document.getElementById('baileeCard').style.display = 'block';
                displayQueue.splice(displayQueue.indexOf("Bailee Knott"), 1); // Remove Bailee from queue
            } else if (displayQueue.includes("Katie Card")) {
                document.getElementById('katieCard').style.display = 'block';
                displayQueue.splice(displayQueue.indexOf("Katie Card"), 1); // Remove Katie from queue
            } else {
                revealTextCards(); // Reveal non-image cards
            }
        }

        function revealNextCard(cardClicked) {
            if (cardClicked === 'bailee') {
                document.getElementById('baileeCard').style.display = 'none';
                if (displayQueue.includes("Katie Card")) {
                    document.getElementById('katieCard').style.display = 'block';
                    displayQueue.splice(displayQueue.indexOf("Katie Card"), 1);
                } else {
                    revealTextCards();
                }
            } else if (cardClicked === 'katie') {
                document.getElementById('katieCard').style.display = 'none';
                revealTextCards();
            }
        }

        function revealTextCards() {
            if (displayQueue.length > 0) {
                document.getElementById('textDisplay').innerHTML = "You have received: " + displayQueue.join(", ");
                displayQueue = []; // Empty queue after displaying all cards
            } else {
                document.getElementById('textDisplay').innerHTML = ""; // Hide text after clicking through all cards
            }
        }

        function resetProgress() {
            localStorage.removeItem('receivedCards');
            window.location.reload();
        }

        function goToDeck() {
            window.location.href = 'marchingchar_deck.html';
        }

        // Load saved deck on page load
        window.onload = function () {
            const savedCards = JSON.parse(localStorage.getItem('receivedCards')) || [];
            if (savedCards.length > 0) {
                document.getElementById('cardPack').style.display = 'none'; // Hide the card pack on reload
                if (savedCards.includes("Bailee Knott")) {
                    document.getElementById('baileeCard').style.display = 'block';
                } else if (savedCards.includes("Katie Card")) {
                    document.getElementById('katieCard').style.display = 'block';
                } else {
                    document.getElementById('textDisplay').innerHTML = "You have received: " + savedCards.join(", ");
                }
            }
        }
    </script>

</body>
</html>
